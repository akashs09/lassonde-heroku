
<html>
    <head>
        <title>Financial Web Scraper</title>
        <meta charset="UTF-8">
        
       
			 <script src="http://ajax.googleapis.com/ajax/libs/jquery/1/jquery.min.js"></script>
			<script>
					var url = new Array();
					    url[0] = 'http://192.168.1.122/_mylab/akash_sharma/mytest/collections/seekingalpha/';
							url[1] = 'http://192.168.1.122/_mylab/akash_sharma/mytest/collections/businessinsider/';
			
					
					function getJson0(value) {
						var xmlhttp = new XMLHttpRequest();
						var urlll = url[0] + value + ".json"; 
						
						xmlhttp.onreadystatechange = function() {
						if (xmlhttp.readyState == 4 && xmlhttp.status == 200) {
								var myArr = JSON.parse(xmlhttp.responseText);
								
								var out = "";
								var total = 0;
								
								for(var j = 0; j < myArr.length; j++) {
										out += '<span>' + myArr[j].name + ':</span> - '+ myArr[j].value+ '<br>';
										total = total + parseInt(myArr[j].value);
								}
								document.getElementById('result0').innerHTML = out;
								document.getElementById('resulttotal0').innerHTML = total;
							}
						};
						xmlhttp.open("GET", urlll, true);
						xmlhttp.send();
					}
					
					function getJson1(value) {
						var xmlhttp = new XMLHttpRequest();
						var urlll = url[1] + value + ".json"; 
						
						xmlhttp.onreadystatechange = function() {
						if (xmlhttp.readyState == 4 && xmlhttp.status == 200) {
								var myArr = JSON.parse(xmlhttp.responseText);
								
								var out = "";
								var total = 0;
								
								for(var j = 0; j < myArr.length; j++) {
										out += '<span>' + myArr[j].name + ':</span> - '+ myArr[j].value+ '<br>';
										total = total + parseFloat((myArr[j].value).replace(",",""));
								}
								document.getElementById('result1').innerHTML = out;
								document.getElementById('resulttotal1').innerHTML = total;
							}
						};
						xmlhttp.open("GET", urlll, true);
						xmlhttp.send();
					}
					
					function clearInfo() {
						document.getElementById("result0").innerHTML = "";
						document.getElementById("result1").innerHTML = "";
						document.getElementById("resulttotal0").innerHTML = "";
						document.getElementById("resulttotal1").innerHTML = "";
					}
					
					
					function getInfo (value) {
						
						var value =  document.getElementById(value).value;
						var data = '';
						
						var selector = document.getElementById("selectors");
						var n=selector.length;
						//alert(n);
						
						for (var i=0; i<n; i++)
						{
							
							if (selector[i].checked) {
								if (selector[i].value == 'seekingalpha') {
									getJson0(value);
								}
								else if (selector[i].value == 'businessinsider') {
									getJson1(value);
								}
							}
						}
						
						
						
						
					}
						
					
					
			</script>			
    </head>
    <body>
       date: <input type="text" id="date" value="2016-05-17"> (yyyy-mm-dd) <button onclick="getInfo('date')";>Get</button> <button onclick="clearInfo('result');">Clear</button> 
				<br />
				 <form id="selectors">
					<input type="checkbox" class="checkbox" name="source" value="seekingalpha"> seekingalpha<br>
					<input type="checkbox" class="checkbox" name="source" value="businessinsider"> businessinsider<br>
				</form> 
				<br />
				
				<hr>
				result: <div id="result0">
				
				</div>
				<br /><br />
				total: <span id="resulttotal0"></span>
				<hr>
				result: <div id="result1">
				
				</div>
				<br /><br />
				total: <span id="resulttotal1"></span>
				
				
    </body>
    
</html>
